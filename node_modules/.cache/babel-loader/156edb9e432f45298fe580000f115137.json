{"ast":null,"code":"var _jsxFileName = \"/home/wallacy/Documentos/Aulas_Trybe/Projetos/online-store/sd-014-b-project-frontend-online-store/src/pages/Home.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport ProductCard from '../components/ProductCard';\nimport Loading from '../components/Loading';\nimport ListCategories from '../components/ListCategories';\nexport default class Home extends Component {\n  constructor() {\n    super();\n\n    this.handleInputChange = ({\n      target: {\n        name,\n        value\n      }\n    }) => this.setState({\n      [name]: value\n    });\n\n    this.handleRadio = ({\n      target: {\n        checked,\n        value\n      }\n    }) => {\n      if (checked) {\n        this.setState({\n          category: value\n        });\n      }\n    };\n\n    this.handleClick = async () => {\n      const {\n        category,\n        searchText\n      } = this.state;\n      this.setState({\n        isLoading: true\n      });\n      const apiResponse = await getProductsFromCategoryAndQuery(category, searchText);\n      this.setState({\n        isLoading: false,\n        searchDone: true,\n        productsResponse: apiResponse.results\n      });\n    };\n\n    this.renderResults = () => {\n      const {\n        productsResponse\n      } = this.state;\n\n      if (productsResponse.length === 0) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 14\n          }\n        }, \"Nenhum produto foi encontrado\");\n      }\n\n      return productsResponse.map(product => /*#__PURE__*/React.createElement(ProductCard, {\n        product: product,\n        key: product.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 25\n        }\n      }));\n    };\n\n    this.state = {\n      isLoading: false,\n      searchDone: false,\n      category: null,\n      searchText: '',\n      productsResponse: []\n    };\n  }\n\n  render() {\n    const {\n      renderResults,\n      handleInputChange,\n      handleClick,\n      handleRadio,\n      state: {\n        isLoading,\n        searchDone,\n        searchText\n      }\n    } = this;\n    return /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/cart\",\n      \"data-testid\": \"shopping-cart-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, \"Carrinho\"), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"home-initial-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }, \"Digite algum termo de pesquisa ou escolha uma categoria.\"), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"searchText\",\n      id: \"query-input\",\n      value: searchText,\n      onChange: handleInputChange,\n      \"data-testid\": \"query-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"query-button\",\n      onClick: handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, \"Pesquisar\")), isLoading && /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 24\n      }\n    }), searchDone && renderResults(), /*#__PURE__*/React.createElement(ListCategories, {\n      handleRadio: handleRadio,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/wallacy/Documentos/Aulas_Trybe/Projetos/online-store/sd-014-b-project-frontend-online-store/src/pages/Home.jsx"],"names":["React","Component","Link","getProductsFromCategoryAndQuery","ProductCard","Loading","ListCategories","Home","constructor","handleInputChange","target","name","value","setState","handleRadio","checked","category","handleClick","searchText","state","isLoading","apiResponse","searchDone","productsResponse","results","renderResults","length","map","product","id","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport ProductCard from '../components/ProductCard';\nimport Loading from '../components/Loading';\nimport ListCategories from '../components/ListCategories';\n\nexport default class Home extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      isLoading: false,\n      searchDone: false,\n      category: null,\n      searchText: '',\n      productsResponse: [],\n    };\n  }\n\n  handleInputChange = ({ target: { name, value } }) => this.setState({ [name]: value });\n\n  handleRadio = ({ target: { checked, value } }) => {\n    if (checked) {\n      this.setState({ category: value });\n    }\n  }\n\n  handleClick = async () => {\n    const { category, searchText } = this.state;\n    this.setState({ isLoading: true });\n\n    const apiResponse = await getProductsFromCategoryAndQuery(category, searchText);\n\n    this.setState({\n      isLoading: false,\n      searchDone: true,\n      productsResponse: apiResponse.results,\n    });\n  }\n\n  renderResults = () => {\n    const { productsResponse } = this.state;\n\n    if (productsResponse.length === 0) {\n      return <p>Nenhum produto foi encontrado</p>;\n    }\n\n    return productsResponse\n      .map((product) => <ProductCard product={ product } key={ product.id } />);\n  }\n\n  render() {\n    const { renderResults, handleInputChange, handleClick, handleRadio,\n      state: { isLoading, searchDone, searchText } } = this;\n\n    return (\n      <main>\n        <Link to=\"/cart\" data-testid=\"shopping-cart-button\">Carrinho</Link>\n        <p data-testid=\"home-initial-message\">\n          Digite algum termo de pesquisa ou escolha uma categoria.\n        </p>\n        <form>\n          <input\n            type=\"text\"\n            name=\"searchText\"\n            id=\"query-input\"\n            value={ searchText }\n            onChange={ handleInputChange }\n            data-testid=\"query-input\"\n          />\n          <button\n            type=\"button\"\n            data-testid=\"query-button\"\n            onClick={ handleClick }\n          >\n            Pesquisar\n          </button>\n        </form>\n        { isLoading && <Loading /> }\n        { searchDone && renderResults() }\n        <ListCategories handleRadio={ handleRadio } />\n      </main>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}