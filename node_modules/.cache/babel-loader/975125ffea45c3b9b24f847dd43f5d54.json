{"ast":null,"code":"var _jsxFileName = \"/home/wallacy/Documentos/Aulas_Trybe/Projetos/online-store/sd-014-b-project-frontend-online-store/src/pages/Home.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport ProductCard from '../components/ProductCard';\nimport Loading from '../components/Loading';\nimport ListCategories from '../components/ListCategories';\nexport default class Home extends Component {\n  constructor() {\n    super();\n\n    this.handleInputChange = ({\n      target: {\n        name,\n        value\n      }\n    }) => this.setState({\n      [name]: value\n    });\n\n    this.handleRadio = async ({\n      target: {\n        checked,\n        value,\n        id\n      }\n    }) => {\n      if (checked) {\n        this.setState({\n          category: value,\n          productsResponse: [],\n          isLoading: true\n        });\n        const fetchCategory = await getProductsFromCategoryAndQuery(id, '$QUERY');\n        this.setState({\n          productsResponse: fetchCategory.results,\n          isLoading: false,\n          searchDone: true\n        });\n      }\n    };\n\n    this.handleClick = async () => {\n      const {\n        category,\n        searchText\n      } = this.state;\n      this.setState({\n        isLoading: true\n      });\n      const apiResponse = await getProductsFromCategoryAndQuery(category, searchText);\n      this.setState({\n        isLoading: false,\n        searchDone: true,\n        productsResponse: apiResponse.results\n      });\n    };\n\n    this.renderResults = () => {\n      const {\n        productsResponse\n      } = this.state;\n\n      if (productsResponse.length === 0) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 14\n          }\n        }, \"Nenhum produto foi encontrado\");\n      }\n\n      return productsResponse.map(product => /*#__PURE__*/React.createElement(ProductCard, {\n        product: product,\n        key: product.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }\n      }));\n    };\n\n    this.state = {\n      isLoading: false,\n      searchDone: false,\n      category: null,\n      searchText: '',\n      productsResponse: []\n    };\n  }\n\n  render() {\n    const {\n      renderResults,\n      handleInputChange,\n      handleClick,\n      handleRadio,\n      state: {\n        isLoading,\n        searchDone,\n        searchText\n      }\n    } = this;\n    return /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/cart\",\n      \"data-testid\": \"shopping-cart-button\",\n      className: \"cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"Carrinho\"), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"home-initial-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, \"Digite algum termo de pesquisa ou escolha uma categoria.\"), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"searchText\",\n      id: \"query-input\",\n      value: searchText,\n      onChange: handleInputChange,\n      \"data-testid\": \"query-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      color: \"primary\",\n      type: \"button\",\n      \"data-testid\": \"query-button\",\n      onClick: handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }\n    }, \"Pesquisar\")))), isLoading && /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 24\n      }\n    }), searchDone && renderResults(), /*#__PURE__*/React.createElement(ListCategories, {\n      handleRadio: handleRadio,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/wallacy/Documentos/Aulas_Trybe/Projetos/online-store/sd-014-b-project-frontend-online-store/src/pages/Home.jsx"],"names":["React","Component","Link","getProductsFromCategoryAndQuery","ProductCard","Loading","ListCategories","Home","constructor","handleInputChange","target","name","value","setState","handleRadio","checked","id","category","productsResponse","isLoading","fetchCategory","results","searchDone","handleClick","searchText","state","apiResponse","renderResults","length","map","product","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport ProductCard from '../components/ProductCard';\nimport Loading from '../components/Loading';\nimport ListCategories from '../components/ListCategories';\n\nexport default class Home extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      isLoading: false,\n      searchDone: false,\n      category: null,\n      searchText: '',\n      productsResponse: [],\n    };\n  }\n\n  handleInputChange = ({ target: { name, value } }) => this.setState({ [name]: value });\n\n  handleRadio = async ({ target: { checked, value, id } }) => {\n    if (checked) {\n      this.setState({\n        category: value,\n        productsResponse: [],\n        isLoading: true,\n      });\n      const fetchCategory = await getProductsFromCategoryAndQuery(id, '$QUERY');\n      this.setState({\n        productsResponse: fetchCategory.results,\n        isLoading: false,\n        searchDone: true,\n      });\n    }\n  }\n\n  handleClick = async () => {\n    const { category, searchText } = this.state;\n    this.setState({ isLoading: true });\n\n    const apiResponse = await getProductsFromCategoryAndQuery(category, searchText);\n\n    this.setState({\n      isLoading: false,\n      searchDone: true,\n      productsResponse: apiResponse.results,\n    });\n  }\n\n  renderResults = () => {\n    const { productsResponse } = this.state;\n\n    if (productsResponse.length === 0) {\n      return <p>Nenhum produto foi encontrado</p>;\n    }\n\n    return productsResponse\n      .map((product) => <ProductCard product={ product } key={ product.id } />);\n  }\n\n  render() {\n    const { renderResults, handleInputChange, handleClick, handleRadio,\n      state: { isLoading, searchDone, searchText } } = this;\n\n    return (\n      <main>\n        <header>\n          <div className=\"header-content\">\n            <Link to=\"/cart\" data-testid=\"shopping-cart-button\" className=\"cart\">\n              Carrinho\n            </Link>\n            <p data-testid=\"home-initial-message\">\n              Digite algum termo de pesquisa ou escolha uma categoria.\n            </p>\n            <form>\n              <input\n                type=\"text\"\n                name=\"searchText\"\n                id=\"query-input\"\n                value={ searchText }\n                onChange={ handleInputChange }\n                data-testid=\"query-input\"\n              />\n              <button\n                color=\"primary\"\n                type=\"button\"\n                data-testid=\"query-button\"\n                onClick={ handleClick }\n              >\n                Pesquisar\n              </button>\n            </form>\n          </div>\n        </header>\n        { isLoading && <Loading /> }\n        { searchDone && renderResults() }\n        <ListCategories handleRadio={ handleRadio } />\n      </main>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}